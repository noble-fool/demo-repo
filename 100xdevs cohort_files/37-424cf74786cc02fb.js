(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37],{5893:function(){},9653:function(e,t,s){"use strict";s.d(t,{u:function(){return r}});var n=s(7437);let r=e=>{let{image:t,title:s,onClick:r}=e;return(0,n.jsxs)("div",{onClick:r,children:[(0,n.jsx)("img",{src:t,alt:s,className:"rounded-md"}),(0,n.jsx)("div",{className:"flex justify-between mt-2 text-gray-900 dark:text-white",children:(0,n.jsx)("div",{children:s})})]})}},387:function(e,t,s){"use strict";s.r(t),s.d(t,{ContentRendererClient:function(){return m}});var n=s(7437),r=s(4033);let l=()=>(0,n.jsxs)("div",{className:"flex justify-end",children:[(0,n.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-4",onClick:()=>{let e=new URL(window.location.href);e.searchParams.set("quality","1080"),window.location.href=e.href},children:"1080p"}),(0,n.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-4",onClick:()=>{let e=new URL(window.location.href);e.searchParams.set("quality","720"),window.location.href=e.href},children:"720p"}),(0,n.jsx)("button",{onClick:()=>{let e=new URL(window.location.href);e.searchParams.set("quality","360"),window.location.href=e.href},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-4",children:"360p"})]});var i=s(2265),o=s(4267);s(1404),s(4830),s(2744),s(8440),s(471);let a=e=>{let{options:t,contentId:s,onReady:r,subtitles:l}=e,a=(0,i.useRef)(null),d=(0,i.useRef)(null),[c,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(0);return(0,i.useEffect)(()=>{s&&c&&fetch("/api/course/videoProgress?contentId=".concat(s)).then(async e=>{let t=await e.json();p(t.progress||0),c.currentTime(t.progress||0)})},[s,c]),(0,i.useEffect)(()=>{if(!c)return;let e=e=>{switch(e.code){case"Space":c.paused()?c.play():c.pause(),e.stopPropagation(),e.preventDefault();break;case"ArrowRight":c.currentTime(c.currentTime()+5),e.stopPropagation();break;case"ArrowLeft":c.currentTime(c.currentTime()-5),e.stopPropagation();break;case"KeyF":c.isFullscreen_?document.exitFullscreen():c.requestFullscreen(),e.stopPropagation()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[c]),(0,i.useEffect)(()=>{let e=window.setInterval(async()=>{let e=c.currentTime();e<=20||await fetch("/api/course/videoProgress",{body:JSON.stringify({currentTimestamp:e,contentId:s}),method:"POST",headers:{"Content-Type":"application/json"}})},1e4);return()=>{window.clearInterval(e)}},[c,s]),(0,i.useEffect)(()=>{if(!d.current&&a.current){let e=document.createElement("video-js");if(e.classList.add("vjs-big-play-centered"),l){let t=document.createElement("track");t.setAttribute("kind","subtitles"),t.setAttribute("label","English"),t.setAttribute("srcLang","en"),t.setAttribute("src",l),e.append(t)}a.current.appendChild(e);let s=d.current=(0,o.default)(e,{...t,playbackRates:[.5,1,1.25,1.5,1.75,2]},()=>{s.mobileUi(),s.eme(),u(s),t.isComposite&&s.spriteThumbnails({interval:t.delta,url:t.thumbnail.secure_url,width:t.width,height:t.height}),s.on("loadedmetadata",()=>{r&&r(s)})});t.sources&&t.sources[0].type.includes("application/dash+xml")&&s.src(t.sources[0])}},[t,r]),(0,i.useEffect)(()=>{let e=d.current;return()=>{e&&!e.isDisposed()&&(e.dispose(),d.current=null)}},[]),(0,n.jsx)("div",{"data-vjs-player":!0,children:(0,n.jsx)("div",{ref:a})})},d=(e,t,s)=>{let n=isFinite(t.end)?t.end/(e.duration()||s.end)*100:100,r=document.createElement("div");return r.className="segment-gap absolute",r.style.left="".concat(n,"%"),r.style.height="100%",r.style.width="4px",r.style.background="#2f3640",{gapEl:r}},c=(e,t)=>{let s=e.controlBar.progressControl.seekBar.el(),n=document.createDocumentFragment();s.querySelectorAll(".segment-marker, .segment-tooltip").forEach(e=>e.remove()),t.forEach(s=>{let{gapEl:r}=d(e,s,t[t.length-1]);n.appendChild(r)}),s.appendChild(n)},u=e=>e.split(":").reduce((e,t)=>60*e+ +t,0),h=(e,t)=>{let s=u(e),n=t.find(e=>e.start<=s&&s<=e.end);return n?n.title:""},p=e=>{let{contentId:t,thumbnails:s,subtitles:r,segments:l,videoJsOptions:o}=e,d=(0,i.useRef)(null),u=(0,i.useRef)(null),[p,m]=(0,i.useState)(!0),f=e=>{var t,s;let n=null===(s=e.getChild("ControlBar"))||void 0===s?void 0:null===(t=s.getChild("ProgressControl"))||void 0===t?void 0:t.getChild("SeekBar");if(n){let e=n.getChild("mouseTimeDisplay");if(e){let t=e.getChild("timeTooltip");t?t.update=function(e,t,s){let n=h(s,l);this.write("".concat(s," - ").concat(n)),setTimeout(()=>{let e=this.el().offsetWidth;this.el().style.right="-".concat(e/2,"px"),this.el().style.left="auto",this.el().style.width="100px",this.el().style.fontSize="12px"},0)}:console.error("TimeTooltip component not found.")}else console.error("MouseTimeDisplay component not found.")}else console.error("SeekBar component not found.")},b=async e=>{d.current=e,c(e,l),f(e)};return(0,n.jsx)("div",{className:"",children:(0,n.jsxs)("div",{className:"flex-1 relative",children:[(0,n.jsx)("div",{id:"thumbnail-preview",ref:u,className:"hidden absolute bg-no-repeat bg-cover w-[320px] h-[180px] pointer-events-none z-10"}),(0,n.jsx)(a,{contentId:t,subtitles:r,options:o,onReady:b})]})})},m=e=>{let{metadata:t,content:s,nextContent:i}=e,o=(0,r.useSearchParams)(),a=(0,r.useRouter)(),d=o.get("quality");if(!t)return(0,n.jsx)("div",{children:"Loading"});let c=(null==t?void 0:t[d||"1080"])||"",u={};return u=c.endsWith(".mpd")?{src:c,type:"application/dash+xml",keySystems:{"com.widevine.alpha":"https://widevine-dash.ezdrm.com/proxy?pX=288FF5&user_id=MTAwMA=="}}:c.endsWith(".m3u8")?{src:c,type:"application/x-mpegURL"}:{src:c,type:"video/mp4"},(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,n.jsx)("div",{className:"text-gray-900 dark:text-white font-bold text-2xl",children:s.title}),t.slides?(0,n.jsx)("div",{children:(0,n.jsx)("a",{href:t.slides,target:"_blank",children:(0,n.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-4",children:"Slides"})})}):null]}),(0,n.jsx)(l,{}),(0,n.jsx)("br",{}),(0,n.jsx)(p,{contentId:s.id,subtitles:t.subtitles,thumbnails:[],segments:t.segments||[],videoJsOptions:{playbackrates:[.5,1,1.25,1.5,1.75,2],controls:!0,fluid:!0,html5:{vhs:{overridenative:!0}},thumbnail:t.thumbnail||!1,isComposite:!0,height:720,width:1080,delta:30,autoplay:!0,responsive:!0,sources:[u]}}),(0,n.jsx)("br",{})," ",(0,n.jsx)("br",{}),s.description,i?(0,n.jsxs)("div",{className:"flex flex-row-reverse",children:[(0,n.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-4",onClick:()=>{let e=window.location.pathname,t=e.split("/");t.pop(),t.push(i.id.toString());let s=t.join("/");a.push(s)},children:i.title})," "]}):null,(0,n.jsx)("br",{})," ",(0,n.jsx)("br",{}),(0,n.jsx)("br",{})," ",(0,n.jsx)("br",{})]})}}}]);